pipeline {
    agent any
parameters {
        file(name: 'File')
    }
stages {
        stage('Run Python Script') {
            steps {
                script {
		    echo "${File}"
		    def fileParam = params.File
		    echo "File parameter is a ${fileParam.getClass().getName()}"
		    if (fileParam instanceof java.io.File) {
    		        def filePath = fileParam.getAbsolutePath()
    		        echo "File path: ${filePath}"
		    } else {
			def filePath = fileParam.getAbsolutePath()
    		        echo "Not ${filePath}"
		    }


                    def command = "python3 Itay_project.py -r s3 --action ${ACTION}"
                    if (action == 'create') {
                        if ("${Public}" == 'Yes') {
			    command += " --name ${Name} --public true"
			} else if ("${Public}" == 'No') {
			    command += " --name ${Name} --public false"
                    }} else if (action == 'upload') {
			command += " --name ${Name} --file ${File}"
		    }
                    sh command
                }
            }
        }
    }

    post {
        always {
            echo 'Pipeline finished.'
            // Perform any cleanup tasks here if needed
        }
    }
}
